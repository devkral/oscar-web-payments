{% extends "checkout/checkout.html" %}

{% block payment_details_content %}
  <form action="{{ paymentform.action }}" class="form-stacked" method="{{ paymentform.method }}">
    {% url 'checkout:payment-details' as crfsformurl %}
    {% if paymentform.action == "" or paymentform.action == crfsformurl %}
      {# form doesn't leak token in these cases #}
      {% csrf_token %}
      <input type="hidden" name="action" value="place_order"/>
    {% endif %}

    {% if paymentform.errors %}
    <div class="alert alert-danger">
        <strong>{% trans "Oops! We found some errors" %}</strong> - {% trans "please check the error messages below and try again" %}
    </div>
    {% endif %}

    {% for field in paymentform %}
        {% if field.is_hidden %}
            {{ field }}
        {% else %}
            <div class="form-group row {% if field.errors %}error{% endif %}">
              <div class="col-md-3">
                {{ field.label }}
              </div>
              <div class="col-md-5">
                {{ field }}
              </div>
              {% if field.errors %}
                <div class="col-md-4">
                  {% for error in field.errors %}
                      <ul class="error-block">
                          <li>{{ error }}</li>
                      </ul>
                  {% endfor %}
                </div>
              {% endif %}
            </div>
        {% endif %}
    {% endfor %}
    <button type="submit" class="btn btn-primary btn-large">{% trans "Proceed" %}</button>
  </form>
{% endblock %}
